# SmartScan 批量扫码功能测试指南

**测试日期**：2026年1月29日  
**应用版本**：1.0.0  
**测试设备**：PEGM00 (Android 13)

---

## 📱 应用已运行

✅ 应用成功安装在设备上  
✅ 应用正在运行  
✅ 可以开始测试

---

## 🧪 测试项目

### 1. 进入批量扫描功能

#### 测试步骤
1. 打开 SmartScan 应用
2. 在底部导航点击"扫描"（第一个标签）
3. 查看右上角是否有"批量扫描"按钮
4. 点击"批量扫描"按钮

#### 预期结果
✅ 应该看到批量扫描页面  
✅ 页面顶部显示"批量扫描"标题  
✅ 有相机预览画面  
✅ 有统计信息栏（已扫描: 0）  

---

### 2. 测试连续扫描

#### 准备工作
准备多个二维码（可以用其他手机生成，或打印，或电脑屏幕显示）

#### 测试步骤
1. 将第一个二维码对准相机
2. 等待自动扫描（会听到或感觉到震动）
3. 观察屏幕变化
4. 继续扫描第二个、第三个二维码

#### 预期结果
✅ 每扫描一个二维码：
  - 手机震动反馈
  - 底部显示 Toast 提示（内容预览）
  - 统计数字增加（已扫描: 1 → 2 → 3）
  - 最近扫描列表更新

✅ 最近扫描列表应该显示：
  - 最多 5 条最新的扫描记录
  - 显示序号、内容预览、类型

---

### 3. 测试去重功能

#### 测试步骤 A：启用去重（默认）
1. 确保右上角的去重图标是"滤网"图标（启用状态）
2. 扫描同一个二维码 2 次
3. 观察反应

#### 预期结果
✅ 第一次扫描：
  - 正常震动
  - 显示内容
  - 计数增加

✅ 第二次扫描（重复）：
  - 轻微震动
  - 显示橙色 Toast："已经扫描过了"
  - 总数增加，但去重后数量不变
  - 统计信息显示："已扫描: 2  去重后: 1"

#### 测试步骤 B：关闭去重
1. 点击右上角的去重图标
2. 图标变为"关闭滤网"图标
3. 扫描同一个二维码 2 次

#### 预期结果
✅ 两次都正常添加  
✅ 统计信息只显示"已扫描: X"（不显示去重后）  

---

### 4. 测试清空列表

#### 测试步骤
1. 扫描几个二维码（至少 3 个）
2. 点击底部"清空列表"按钮
3. 在弹出的对话框中点击"确定"

#### 预期结果
✅ 弹出确认对话框  
✅ 点击确定后：
  - 列表清空
  - 统计归零（已扫描: 0）
  - 最近扫描列表消失

---

### 5. 测试完成扫描

#### 测试步骤
1. 扫描至少 5 个不同的二维码
2. 点击右上角"完成"按钮或底部"完成"按钮

#### 预期结果
✅ 跳转到"扫描结果"页面  
✅ 页面显示：
  - 摘要卡片（总计、去重后）
  - 如果有扫描时长，显示"用时: X秒"
  - 完整的扫描结果列表

---

### 6. 测试结果页面

#### 测试步骤
1. 在结果页面滚动列表
2. 点击任意一条记录
3. 观察详情对话框

#### 预期结果
✅ 列表可以流畅滚动  
✅ 每条记录显示：
  - 序号
  - 完整内容
  - 类型标签
  - 扫描时间
  - 复制按钮

✅ 点击记录后：
  - 弹出详情对话框
  - 内容可选择
  - 有"关闭"和"复制"按钮

---

### 7. 测试复制功能

#### 测试步骤
1. 在结果页面
2. 点击某条记录右侧的"复制"图标
3. 或在详情对话框中点击"复制"按钮

#### 预期结果
✅ 显示 Toast："已复制到剪贴板"  
✅ 可以到其他应用粘贴验证  

---

### 8. 测试导出 CSV

#### 测试步骤
1. 在结果页面
2. 点击底部"导出 CSV"按钮
3. 等待处理
4. 查看结果对话框

#### 预期结果
✅ 显示"导出成功"对话框  
✅ 显示文件保存路径  
✅ 对话框有"关闭"和"分享"按钮  
✅ 文件名格式：smartscan_batch_20260129_153000.csv  

#### 验证文件内容（可选）
1. 点击"分享"按钮
2. 选择"保存到文件"或其他应用
3. 打开 CSV 文件查看
4. 应该包含表头和数据行

---

### 9. 测试导出 TXT

#### 测试步骤
1. 在结果页面
2. 点击底部"导出 TXT"按钮
3. 等待处理
4. 查看结果对话框

#### 预期结果
✅ 显示"导出成功"对话框  
✅ 显示文件保存路径  
✅ 文件名格式：smartscan_batch_20260129_153000.txt  

#### 验证文件内容（可选）
打开 TXT 文件应该看到：
```
SmartScan 批量扫描结果
========================================

扫描时间：2026-01-29 15:30:00
总计：5 条
----------------------------------------

1. https://example.com
   类型: 网址
   时间: 2026-01-29 15:30:01

2. 13800138000
   类型: 电话
   时间: 2026-01-29 15:30:05
...
```

---

### 10. 测试分享功能

#### 测试步骤
1. 在结果页面
2. 点击底部大的"分享"按钮
3. 选择分享目标（微信、QQ、邮件等）

#### 预期结果
✅ 打开系统分享面板  
✅ 显示可分享的应用列表  
✅ 分享内容为纯文本格式（每行一个二维码内容）  
✅ 可以成功分享到其他应用  

---

### 11. 测试退出批量扫描

#### 测试步骤
1. 在结果页面
2. 点击左上角"关闭"按钮
3. 查看确认对话框

#### 预期结果
✅ 弹出确认对话框  
✅ 对话框内容："退出批量扫描模式？未保存的结果将丢失。"  
✅ 有"取消"和"确定"按钮  
✅ 点击确定后返回主页面  

---

### 12. 测试语言切换

#### 测试步骤
1. 退出应用
2. 进入手机"设置" → "语言和输入法"
3. 切换系统语言（中文 ↔ 英文）
4. 重新打开 SmartScan
5. 进入批量扫描

#### 预期结果（英文）
✅ 界面显示英文：
  - "Batch Scan"
  - "Scanned: X"
  - "Unique: X"
  - "Remove Duplicates"
  - "Finish"
  - "Clear List"
  - "Export CSV"
  - "Export TXT"

✅ 所有按钮、对话框、提示都是英文

---

## 🐛 问题记录

### 发现问题时请记录

| # | 问题描述 | 重现步骤 | 严重程度 | 状态 |
|---|----------|----------|----------|------|
| 1 |          |          |          |      |
| 2 |          |          |          |      |

---

## ✅ 测试检查清单

### 基础功能
- [ ] 能够进入批量扫描页面
- [ ] 相机预览正常显示
- [ ] 能够连续扫描多个二维码
- [ ] 统计数字正确更新
- [ ] 最近扫描列表正常显示

### 去重功能
- [ ] 去重开关可以切换
- [ ] 启用去重时，重复扫描会提示
- [ ] 启用去重时，统计显示正确
- [ ] 关闭去重时，所有扫描都添加

### 反馈功能
- [ ] 扫描成功有震动反馈
- [ ] 扫描重复有不同的震动
- [ ] Toast 提示显示正确
- [ ] 各种操作有明确反馈

### 数据管理
- [ ] 清空列表功能正常
- [ ] 完成扫描跳转正常
- [ ] 结果列表显示完整
- [ ] 详情对话框显示正确

### 导出功能
- [ ] CSV 导出成功
- [ ] TXT 导出成功
- [ ] 文件内容正确
- [ ] 文件可以打开和分享

### 分享功能
- [ ] 分享面板正常打开
- [ ] 分享内容格式正确
- [ ] 可以分享到其他应用
- [ ] 文件分享功能正常

### 国际化
- [ ] 中文界面完整
- [ ] 英文界面完整
- [ ] 切换语言后显示正确

### 性能和体验
- [ ] 扫描响应速度快
- [ ] 列表滚动流畅
- [ ] 页面切换无卡顿
- [ ] 导出速度合理
- [ ] 无崩溃和闪退

---

## 📊 性能测试

### 大量数据测试

#### 测试步骤
1. 连续扫描 50+ 个二维码
2. 观察应用性能

#### 预期结果
✅ 应用保持流畅  
✅ 列表滚动正常  
✅ 导出速度 < 3秒  
✅ 无内存溢出  

---

## 🎯 用户体验测试

### 易用性
- [ ] 入口明显易找
- [ ] 操作流程清晰
- [ ] 反馈及时明确
- [ ] 错误提示友好

### 专业性
- [ ] 适合商业场景
- [ ] 数据格式规范
- [ ] 功能完整实用

---

## 💡 测试建议

### 推荐测试场景

#### 场景 1：快速测试（5分钟）
1. 扫描 3-5 个不同的二维码
2. 测试去重功能（扫描重复的）
3. 导出 CSV 查看
4. 测试分享功能

#### 场景 2：完整测试（15分钟）
1. 按照上述 12 个测试项目逐一测试
2. 记录发现的问题
3. 测试中英文切换

#### 场景 3：压力测试（10分钟）
1. 连续扫描 50+ 个二维码
2. 测试大数据量下的性能
3. 测试导出速度

---

## 📝 测试报告模板

### 测试完成后填写

```
测试人员：________
测试日期：________
测试时长：________

测试项目总数：12
通过项目：____
失败项目：____

发现问题数：____
严重问题：____
一般问题：____

总体评价：
□ 优秀 - 无明显问题，可以发布
□ 良好 - 有小问题，建议修复后发布
□ 一般 - 有明显问题，需要修复
□ 较差 - 有严重问题，不建议发布

详细反馈：
______________________________
______________________________
______________________________
```

---

## 🚀 快速测试命令

如果需要重新安装应用：

```bash
# 安装最新版本
cd /Users/fancw/StudioProjects/scan/smartscan_app
flutter build apk --release
adb -s b23adc17 install -r build/app/outputs/flutter-apk/app-release.apk

# 或直接运行
flutter run -d b23adc17 --release
```

---

**应用状态**：✅ 正在运行  
**准备测试**：✅ 可以开始  

**现在可以在手机上测试批量扫码功能了！**
